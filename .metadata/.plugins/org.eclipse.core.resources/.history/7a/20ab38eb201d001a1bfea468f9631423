package bostonchildcare.Controller;

import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.DBCursor;
import com.mongodb.DBObject;
import com.mongodb.MongoClient;
import com.mongodb.MongoClientURI;
import com.mongodb.QueryBuilder;

import bostonchildcare.View.StudentTeacher_Office_View;

public class StudentTeacher_Office_Controller {
private static final StudentTeacher_Office_Controller instance = new StudentTeacher_Office_Controller();
private StudentTeacher_Office_View sview;
private Vaccination_Controller vcontr;
private StudentEnrollment_Controller scontr;
private Enrolled_Student_Controller sencontr;
private Assign_Class_Controller asscontr;
private ClassStudents_Controller class_stud_contr;

public static StudentTeacher_Office_Controller get_instance() {
	return instance;
}

private StudentTeacher_Office_Controller() {
	this.sview = StudentTeacher_Office_View.get_instance();
	initController();
}

public void initController() {
	sview.setVisible(true);
	sview.getNewstuenrol_btn().addActionListener(l->nav_to_stud_enrollment());
sview.getLogout_btn().addActionListener(l->logout());
	sview.getEnrolledstu_btn().addActionListener(l->enrolled_stud());
	sview.getAssignClass_btn().addActionListener(l->nav_assign_class());
	sview.getTeachers_btn().addActionListener(l->nav_class_stud());
	sview.getLoad_reg_stu_btn().addActionListener(l->call_to_atlas());
}

public void call_to_atlas() {
	MongoClient mongoClient_local = new MongoClient( "localhost" , 27017 );
	MongoClientURI uri = new MongoClientURI(
		    "mongodb+srv://amar:mathisfun@mydaycare-i8kor.mongodb.net/test?retryWrites=true&w=majority");

	MongoClient mongoClient_atlas = new MongoClient(uri);
	DB db = mongoClient_atlas.getDB("Mongobackup");
	DBCollection coll = db.getCollection("students");
	DBCursor cursor = coll.find();
	while(cursor.hasNext()) {
		DBObject obj = cursor.next();
		String fname = (String)obj.get("firstname");
		 String lname = (String)obj.get("lastname");
		 String pfname = (String)obj.get("pfname");
		 String plname = (String)obj.get("plname");
		 String emailid  = (String)obj.get("emailid");
		 int age = Integer.parseInt((String)obj.get("age"));
		System.out.println(fname); 
	}
	 
	
}

public void nav_class_stud() {
	//class_stud_contr = class_stud_contr.get_instance();
	class_stud_contr.get_instance().initController();
}

public void nav_vaccine() {
	sview.setVisible(false);
	this.vcontr = Vaccination_Controller.get_instance();
	//this.vcontr.initController();
}

public void nav_assign_class() {
	sview.setVisible(false);
	asscontr = Assign_Class_Controller.get_instance();
	asscontr.initController();
}

public void enrolled_stud() {
	sview.setVisible(false);
	sencontr = Enrolled_Student_Controller.get_instance();
	sencontr.initController();
}


public void nav_to_stud_enrollment() {
	sview.setVisible(false);
	scontr.get_instance();
}

public void logout() {
	sview.setVisible(false);
	Login_Controller.get_instance().initController();
}



}
