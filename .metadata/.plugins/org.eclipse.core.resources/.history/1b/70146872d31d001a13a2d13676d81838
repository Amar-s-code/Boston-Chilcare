package Helpers;

import java.awt.Color;
import java.awt.Component;
import java.time.Duration;
import java.time.LocalDate;
import java.time.Month;

import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;

import bostonchildcare.Model.School_Model;
import bostonchildcare.Model.Student_Model;

public class MyTableCellRenderer_flag_Vaccination extends DefaultTableCellRenderer {
	   public Component getTableCellRendererComponent(
	            JTable table, Object value, boolean isSelected,
	            boolean hasFocus, int row, int column)
	   {
	      MyTableModel mytm = (MyTableModel) table.getModel();
	      Student_Model stud = (Student_Model) mytm.getValueAtRow(row);
	      for(Student_Model student : School_Model.get_instance().getUnenrolled_student_list()) {
	    	  if(stud.getLname().equalsIgnoreCase(student.getLname())) {
	    		  LocalDate curr = LocalDate.now();
	    		  Duration dur = Duration.between(curr, student.getRegdate());
	    		  
	    		  if (student.isVacc_report_initialized()&dur.toDays()<365) {
	    		         setBackground(Color.green);
	    		      }
	    		      else {
	    		         setBackground(Color.red);
	    		      }
	    	  }
	      }
	      
	  
	      return super.getTableCellRendererComponent(table, value, isSelected,
	                                                 hasFocus, row, column);
	   }
	}
